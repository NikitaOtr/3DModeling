(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var t,n,r,o,a,c,u,i,l,s,d,m,v,f,y,h,p,g,E;f=document.querySelector("#timer-seconds"),y=document.querySelector("#timer-minutes"),h=document.querySelector("#timer-hours"),p=document.querySelector("#timer-days"),g=function(e){return e<0?"00":e<10?"0"+e:e},(E=function(){var e,t,n,r,o=(e=(new Date("30 sept 2021").getTime()-(new Date).getTime())/1e3,t=Math.floor(e%60),n=Math.floor(e/60%60),r=Math.floor(e/3600%24),{days:Math.floor(e/3600/24),hours:r,minutes:n,seconds:t});p.textContent=g(o.days),h.textContent=g(o.hours),y.textContent=g(o.minutes),f.textContent=g(o.seconds)})(),setInterval(E,1e3),v=document.querySelector("menu"),document.addEventListener("click",(function(e){var t=e.target;t!==v&&(t.closest(".menu")||v.classList.contains("active-menu"))&&v.classList.toggle("active-menu")})),s=document.querySelector(".popup"),d=document.querySelectorAll(".popup-btn"),m=document.querySelector(".popup-content"),d.forEach((function(e){e.addEventListener("click",(function(){var e;s.style.display="block",window.screen.width>768&&(e=0,m.style.left="0%",function t(){e+=2,m.style.left=e+"%",e<38&&requestAnimationFrame(t)}())}))})),s.addEventListener("click",(function(e){var t=e.target;if(t.matches(".popup-close"))return s.style.display="none";t.closest(".popup-content")||(s.style.display="none")})),function(){var t=document.querySelectorAll("menu a");(t=Array.from(t)).push(document.querySelector("main>a"));var n,r=function(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t))||n&&t&&"number"==typeof t.length){r&&(t=r);var o=0,a=function(){};return{s:a,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,u=!0,i=!1;return{s:function(){r=r.call(t)},n:function(){var e=r.next();return u=e.done,e},e:function(e){i=!0,c=e},f:function(){try{u||null==r.return||r.return()}finally{if(i)throw c}}}}(t);try{var o=function(){var e=n.value;e.addEventListener("click",(function(t){t.preventDefault();var n=e.getAttribute("href");"#close"!==n&&document.querySelector(n).scrollIntoView({behavior:"smooth",block:"start"})}))};for(r.s();!(n=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}}(),u=document.querySelector(".service-header"),i=u.querySelectorAll(".service-header-tab"),l=document.querySelectorAll(".service-tab"),u.addEventListener("click",(function(e){var t=e.target.closest(".service-header-tab");t&&function(e){for(var t=0;t<i.length;t++)i[t]===e?(i[t].classList.add("active"),l[t].classList.remove("d-none")):(i[t].classList.remove("active"),l[t].classList.add("d-none"))}(t)})),function(){var e=document.querySelector(".portfolio-content"),t=e.querySelectorAll(".portfolio-item"),n=[],r=e.querySelector(".portfolio-dots");t.forEach((function(){var e=document.createElement("li");e.classList.add("dot"),n.push(e),r.append(e)})),n[0].classList.add("dot-active");var o=function(e){t[e].classList.remove("portfolio-item-active"),n[e].classList.remove("dot-active")},a=function(e){t[e].classList.add("portfolio-item-active"),n[e].classList.add("dot-active")},c=0;e.addEventListener("click",(function(e){e.preventDefault();var r=e.target;r.matches(".dot")?(o(c),n.forEach((function(e,t){return r===e&&(c=t)})),a(c)):r.matches("#arrow-right")?(o(c),c=(c+1)%t.length,a(c)):r.matches("#arrow-left")&&(o(c),c=(c+(t.length-1))%t.length,a(c))}));var u,i=function(){o(c),c=(c+1)%t.length,a(c)},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;u=setInterval(i,e)};l(),e.addEventListener("mouseover",(function(e){var t=e.target;(t.matches(".portfolio-btn")||t.matches(".dot"))&&clearInterval(u)})),e.addEventListener("mouseout",(function(e){var t=e.target;(t.matches(".portfolio-btn")||t.matches(".dot"))&&l()}))}(),a=document.getElementById("command"),c=function(e){var t;return t=[e.dataset.img,e.src],e.src=t[0],e.dataset.img=t[1],t},a.addEventListener("mouseover",(function(e){var t=e.target;t.matches(".command__photo")&&c(t)})),a.addEventListener("mouseout",(function(e){var t=e.target;t.matches(".command__photo")&&c(t)})),function(){document.querySelector(".calc-block").addEventListener("input",(function(e){var t=e.target;t.value=t.value.replace(/\D/,"")}));var e=function(e){e.addEventListener("input",(function(e){var t=e.target;"user_name"===t.name?t.value=t.value.replace(/[^а-яА-ЯёЁ\s]/,""):"user_email"===t.name?t.value=t.value.replace(/[^-\w!_.~*@]/,""):"user_phone"===t.name?t.value=t.value.replace(/[^\d+]/,""):"user_message"===t.name&&(t.value=t.value.replace(/[^а-яА-ЯёЁ\s.!-?1-9]/,""))}))},t=document.getElementById("form1"),n=document.getElementById("form2"),r=document.getElementById("form3");e(t),e(n),e(r)}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),r=document.querySelector(".calc-square"),o=document.querySelector(".calc-count"),a=document.querySelector(".calc-day"),c=document.getElementById("total"),u=function(e){var t=+c.textContent,n=e-t,r=n>0?Math.floor(n/31):Math.ceil(n/31),o=t+n%31;return function t(){o+=r,c.textContent=o,o!==e&&requestAnimationFrame(t)}()},i=function(){var t=+n.value/10,c=+r.value,i=1,l=1;+o.value>1&&(i+=(+o.value-1)/10),a.value&&(+a.value<5?l=2:+a.value<10&&(l=1.5));var s=e*t*c*i*l;u(Math.round(s))};t.addEventListener("input",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&i()})),i()}(),t=function(e){var t=document.createElement("div");t.style.cssText="font-size: 2rem; color: white;",e.append(t),e.addEventListener("submit",(function(n){n.preventDefault(),t.innerHTML='<div class="sk-rotating-plane"></div>';var r=new FormData(e),o={};r.forEach((function(e,t){return o[t]=e})),function(e){return fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}(o).then((function(n){if(200!==n.status)throw new Error(n.statusText);t.textContent="Спасибо! Мы скоро вам перезвоним.",e.reset()})).catch((function(e){t.textContent="Что-то пошло не так.",console.error(e)}))}))},n=document.getElementById("form1"),r=document.getElementById("form2"),o=document.getElementById("form3"),t(n),t(r),t(o)})();